var D=Object.defineProperty;var G=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var N=(r,s,t)=>s in r?D(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,U=(r,s)=>{for(var t in s||(s={}))S.call(s,t)&&N(r,t,s[t]);if(G)for(var t of G(s))H.call(s,t)&&N(r,t,s[t]);return r};var B=(r,s,t)=>new Promise((p,_)=>{var u=i=>{try{f(t.next(i))}catch(v){_(v)}},e=i=>{try{f(t.throw(i))}catch(v){_(v)}},f=i=>i.done?p(i.value):Promise.resolve(i.value).then(u,e);f((t=t.apply(r,s)).next())});import{k as O,r as w,G as A,H as J,B as m,c as g,o as d,b as n,p as E,w as o,f as x,u as b,F as j,y as K,e as h,t as P,D as F,I as M}from"./index-DDp1eRUk.js";import{F as Q}from"./FileUploader-BhzMGNFW.js";const W={key:1,class:"w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 overflow-y-auto gap-4 flex-1"},X=["src"],Y={class:"flex gap-2 items-center text-black"},Z={class:"flex gap-2 items-center text-black"},ee=["onClick"],ae=["src"],te={key:1,class:"h-48 bg-gray-200 flex items-center justify-center"},re={__name:"Guide",setup(r){const s=O(),t=w(!1),p=w(),_=w(!1),u=A({doctype:"Guide",fields:["name","first_name","last_name","image","email","phone_number"],auto:!0,orderBy:"creation desc",pageLength:20,cache:"Guides"}),e=J({first_name:"",last_name:"",email:"",phone_number:"",image:""}),f={first_name:[{required:!0,message:"Please enter first name"}],last_name:[{required:!0,message:"Please enter last name"}],email:[{required:!0,message:"Please enter email",type:"email"}],phone_number:[{required:!0,message:"Please enter phone number"}]},i=c=>{e.image=c.file_url},v=()=>B(this,null,function*(){try{yield p.value.validate(),_.value=!0,yield u.insert.submit(U({},e)),F.success("Guide created successfully",2),e.first_name="",e.last_name="",e.email="",e.phone_number="",e.image="",t.value=!1,yield M(()=>p.value.resetFields()),yield u.reload()}catch(c){c.errorFields?F.error("Please fix the errors below",2):F.error("Failed to create guide: "+(c.message||c),2)}finally{_.value=!1}}),R=()=>{e.first_name="",e.last_name="",e.email="",e.phone_number="",e.image="",t.value=!1,p.value.resetFields()};return(c,l)=>{const $=m("a-button"),q=m("a-page-header"),I=m("a-empty"),C=m("FeatherIcon"),L=m("a-card-meta"),T=m("a-card"),y=m("a-input"),k=m("a-form-item"),V=m("a-form"),z=m("a-modal");return d(),g(j,null,[n(q,{class:"!p-0 !mb-2",title:"Guide",onBack:l[1]||(l[1]=()=>c.$router.go(-1))},{extra:o(()=>[n($,{type:"primary",onClick:l[0]||(l[0]=a=>t.value=!0)},{default:o(()=>[...l[7]||(l[7]=[x("Create guide",-1)])]),_:1})]),_:1}),!b(u).data||b(u).data.length===0?(d(),E(I,{key:0,class:"w-full",description:"No guides available"})):(d(),g("div",W,[(d(!0),g(j,null,K(b(u).data,a=>(d(),E(T,{key:a.name,hoverable:"",onClick:le=>b(s).push({name:"Employee",params:{name:a.name}})},{cover:o(()=>[h("img",{class:"h-80 w-full object-cover",alt:"image",src:a.image||"/placeholder.jpg"},null,8,X)]),default:o(()=>[n(L,{title:`${a.last_name} ${a.first_name}`},{description:o(()=>[h("div",Y,[n(C,{name:"mail",class:"size-4"}),x(" "+P(a.email),1)]),h("div",Z,[n(C,{name:"phone",class:"size-4"}),x(" "+P((a==null?void 0:a.phone_number)||""),1)])]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),128))])),n(z,{open:t.value,"onUpdate:open":l[6]||(l[6]=a=>t.value=a),title:"Create New Guide",onOk:v,onCancel:R,"confirm-loading":_.value},{default:o(()=>[n(V,{ref_key:"createFormRef",ref:p,model:e,rules:f,layout:"vertical"},{default:o(()=>[n(k,{label:"First Name",name:"first_name"},{default:o(()=>[n(y,{value:e.first_name,"onUpdate:value":l[2]||(l[2]=a=>e.first_name=a),placeholder:"Enter first name"},null,8,["value"])]),_:1}),n(k,{label:"Last Name",name:"last_name"},{default:o(()=>[n(y,{value:e.last_name,"onUpdate:value":l[3]||(l[3]=a=>e.last_name=a),placeholder:"Enter last name"},null,8,["value"])]),_:1}),n(k,{label:"Email",name:"email"},{default:o(()=>[n(y,{value:e.email,"onUpdate:value":l[4]||(l[4]=a=>e.email=a),placeholder:"Enter email",type:"email"},null,8,["value"])]),_:1}),n(k,{label:"Phone Number",name:"phone_number"},{default:o(()=>[n(y,{value:e.phone_number,"onUpdate:value":l[5]||(l[5]=a=>e.phone_number=a),placeholder:"Enter phone number"},null,8,["value"])]),_:1})]),_:1},8,["model"]),n(b(Q),{fileTypes:["jpg","jpeg","png","pdf","doc","docx"],multiple:!1,onSuccess:i,class:"border-none p-0"},{default:o(({openFileSelector:a})=>[h("div",{class:"rounded overflow-hidden cursor-pointer",onClick:a},[e.image?(d(),g("img",{key:0,src:e.image,alt:"avatar",class:"w-full h-64 object-cover"},null,8,ae)):(d(),g("div",te,[...l[8]||(l[8]=[h("div",{class:"ant-upload-text"},"Upload Image",-1)])]))],8,ee)]),_:1})]),_:1},8,["open","confirm-loading"])],64)}}};export{re as default};
//# sourceMappingURL=Guide-BcdKWyk-.js.map
