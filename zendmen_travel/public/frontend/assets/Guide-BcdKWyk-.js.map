{"version":3,"file":"Guide-BcdKWyk-.js","sources":["../../../../frontend/src/pages/Guide.vue"],"sourcesContent":["<template>\n    <a-page-header class=\"!p-0 !mb-2\" title=\"Guide\" @back=\"() => $router.go(-1)\">\n        <template #extra>\n            <a-button type=\"primary\" @click=\"open = true\">Create guide</a-button>\n        </template>\n    </a-page-header>\n    <a-empty v-if=\"!guides.data || guides.data.length === 0\" class=\"w-full\" description=\"No guides available\" />\n    <div v-else class=\"w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 overflow-y-auto gap-4 flex-1\">\n        <a-card v-for=\"guide in guides.data\" :key=\"guide.name\" hoverable\n            @click=\"router.push({ name: 'Employee', params: { name: guide.name } })\">\n            <template #cover>\n                <img class=\"h-80 w-full object-cover\" alt=\"image\" :src=\"guide.image || '/placeholder.jpg'\" />\n            </template>\n            <a-card-meta :title=\"`${guide.last_name} ${guide.first_name}`\">\n                <template #description>\n                    <div class=\"flex gap-2 items-center text-black\">\n                        <FeatherIcon name=\"mail\" class=\"size-4\" /> {{ guide.email }}\n                    </div>\n                    <div class=\"flex gap-2 items-center text-black\">\n                        <FeatherIcon name=\"phone\" class=\"size-4\" /> {{ guide?.phone_number || '' }}\n                    </div>\n                </template>\n            </a-card-meta>\n        </a-card>\n    </div>\n\n    <a-modal v-model:open=\"open\" title=\"Create New Guide\" @ok=\"handleCreate\" @cancel=\"handleCancel\"\n        :confirm-loading=\"creating\">\n        <a-form ref=\"createFormRef\" :model=\"newGuide\" :rules=\"formRules\" layout=\"vertical\">\n            <a-form-item label=\"First Name\" name=\"first_name\">\n                <a-input v-model:value=\"newGuide.first_name\" placeholder=\"Enter first name\" />\n            </a-form-item>\n            <a-form-item label=\"Last Name\" name=\"last_name\">\n                <a-input v-model:value=\"newGuide.last_name\" placeholder=\"Enter last name\" />\n            </a-form-item>\n            <a-form-item label=\"Email\" name=\"email\">\n                <a-input v-model:value=\"newGuide.email\" placeholder=\"Enter email\" type=\"email\" />\n            </a-form-item>\n            <a-form-item label=\"Phone Number\" name=\"phone_number\">\n                <a-input v-model:value=\"newGuide.phone_number\" placeholder=\"Enter phone number\" />\n            </a-form-item>\n        </a-form>\n        <FileUploader :fileTypes=\"['jpg', 'jpeg', 'png', 'pdf', 'doc', 'docx']\" :multiple=\"false\"\n            @success=\"handleFileUpload\" class=\"border-none p-0\">\n            <template #default=\"{ openFileSelector }\">\n                <div class=\"rounded overflow-hidden cursor-pointer\" @click=\"openFileSelector\">\n                    <img v-if=\"newGuide.image\" :src=\"newGuide.image\" alt=\"avatar\" class=\"w-full h-64 object-cover\" />\n                    <div v-else class=\"h-48 bg-gray-200 flex items-center justify-center\">\n                        <div class=\"ant-upload-text\">Upload Image</div>\n                    </div>\n                </div>\n            </template>\n        </FileUploader>\n    </a-modal>\n</template>\n<script setup>\nimport { createListResource, FileUploader } from 'frappe-ui';\nimport { ref, reactive, nextTick, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { message } from 'ant-design-vue';\n\nconst router = useRouter();\nconst open = ref(false);\nconst createFormRef = ref();\nconst creating = ref(false);\n\nconst guides = createListResource({\n    doctype: 'Guide',\n    fields: ['name', 'first_name', 'last_name', 'image', 'email', 'phone_number'],\n    auto: true,\n    orderBy: 'creation desc',\n    pageLength: 20,\n    cache: 'Guides',\n});\n\nconst newGuide = reactive({\n    first_name: '',\n    last_name: '',\n    email: '',\n    phone_number: '',\n    image: ''\n});\n\nconst formRules = {\n    first_name: [{ required: true, message: 'Please enter first name' }],\n    last_name: [{ required: true, message: 'Please enter last name' }],\n    email: [{ required: true, message: 'Please enter email', type: 'email' }],\n    phone_number: [{ required: true, message: 'Please enter phone number' }]\n};\n\nconst handleFileUpload = (file) => {\n    newGuide.image = file.file_url;\n};\n\nconst handleCreate = async () => {\n    try {\n        await createFormRef.value.validate();\n        creating.value = true;\n        await guides.insert.submit({ ...newGuide });\n        message.success('Guide created successfully', 2);\n        newGuide.first_name = '';\n        newGuide.last_name = '';\n        newGuide.email = '';\n        newGuide.phone_number = '';\n        newGuide.image = '';\n        open.value = false;\n        await nextTick(() => createFormRef.value.resetFields());\n        await guides.reload();\n    } catch (error) {\n        if (error.errorFields) {\n            message.error('Please fix the errors below', 2);\n        } else {\n            message.error('Failed to create guide: ' + (error.message || error), 2);\n        }\n    } finally {\n        creating.value = false;\n    }\n};\n\nconst handleCancel = () => {\n    newGuide.first_name = '';\n    newGuide.last_name = '';\n    newGuide.email = '';\n    newGuide.phone_number = '';\n    newGuide.image = '';\n    open.value = false;\n    createFormRef.value.resetFields();\n};\n</script>"],"names":["router","useRouter","open","ref","createFormRef","creating","guides","createListResource","newGuide","reactive","formRules","handleFileUpload","file","handleCreate","__async","__spreadValues","message","nextTick","error","handleCancel","_createVNode","_component_a_page_header","_cache","$router","_component_a_button","_unref","_createBlock","_component_a_empty","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","guide","_component_a_card","_createElementVNode","_component_a_card_meta","_hoisted_3","_component_FeatherIcon","_toDisplayString","_hoisted_4","_component_a_modal","$event","_component_a_form","_component_a_form_item","_component_a_input","FileUploader","_withCtx","openFileSelector","_hoisted_7"],"mappings":"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"}