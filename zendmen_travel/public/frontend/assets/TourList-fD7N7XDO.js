var M=Object.defineProperty;var U=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var h=(u,l,e)=>l in u?M(u,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[l]=e,j=(u,l)=>{for(var e in l||(l={}))O.call(l,e)&&h(u,e,l[e]);if(U)for(var e of U(l))z.call(l,e)&&h(u,e,l[e]);return u};var C=(u,l,e)=>new Promise((m,p)=>{var c=i=>{try{g(e.next(i))}catch(v){p(v)}},a=i=>{try{g(e.throw(i))}catch(v){p(v)}},g=i=>i.done?m(i.value):Promise.resolve(i.value).then(c,a);g((e=e.apply(u,l)).next())});import{k as A,r as x,G as K,H as Q,J as W,B as s,c as y,o as d,b as r,p as L,w as n,f,u as b,F as N,y as X,t as R,e as F,D as T,I as Y}from"./index-DDp1eRUk.js";import{F as Z}from"./FileUploader-BhzMGNFW.js";const ee={key:1,class:"grid grid-cols-4 gap-4 p-4"},ae=["src"],te=["onClick"],oe=["src"],re={key:1,class:"h-48 bg-gray-200 flex items-center justify-center"},ie={__name:"TourList",setup(u){const l=A(),e=x(!1),m=x(),p=x(!1),c=K({doctype:"Tour",fields:["name","tour_name","duration"],auto:!1}),a=Q({tour_name:"",duration:1,category:"",image:""}),g={tour_name:[{required:!0,message:"Please enter tour name"}],duration:[{required:!0,message:"Please enter duration"}],category:[{required:!0,message:"Please select category"}]},i=_=>{a.image=_.file_url},v=()=>C(this,null,function*(){try{yield m.value.validate(),p.value=!0,yield c.insert.submit(j({},a)),T.success("Tour created successfully",2),a.tour_name="",a.duration=1,a.category="",a.image="",e.value=!1,yield Y(()=>m.value.resetFields()),yield c.reload()}catch(_){_.errorFields?T.error("Please fix the errors below",2):T.error("Failed to create tour: "+(_.message||_),2)}finally{p.value=!1}}),P=()=>{a.tour_name="",a.duration=1,a.category="",a.image="",e.value=!1,m.value.resetFields()};return W(()=>C(this,null,function*(){yield c.fetch()})),(_,t)=>{const q=s("a-button"),D=s("a-page-header"),E=s("a-empty"),B=s("a-tag"),S=s("a-card-meta"),V=s("a-card"),G=s("a-input"),k=s("a-form-item"),I=s("a-input-number"),w=s("a-select-option"),$=s("a-select"),H=s("a-form"),J=s("a-modal");return d(),y(N,null,[r(D,{class:"!p-0 !mb-2",title:"Guide"},{extra:n(()=>[r(q,{type:"primary",onClick:t[0]||(t[0]=o=>e.value=!0)},{default:n(()=>[...t[5]||(t[5]=[f("Create tour",-1)])]),_:1})]),_:1}),!b(c).data||b(c).data.length===0?(d(),L(E,{key:0,class:"w-full",description:"No tours available"})):(d(),y("div",ee,[(d(!0),y(N,null,X(b(c).data,o=>(d(),L(V,{key:o.name,hoverable:"",onClick:ne=>b(l).push({name:"Tour",params:{name:o.name}})},{cover:n(()=>[F("img",{class:"h-80 w-full object-cover",alt:"image",src:o.image||"/placeholder.jpg"},null,8,ae)]),default:n(()=>[r(S,{title:o.tour_name},{description:n(()=>[r(B,{color:"blue"},{default:n(()=>[f(R(o.category),1)]),_:2},1024),r(B,{color:"orange"},{default:n(()=>[f(R(o.duration)+" days",1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),128))])),r(J,{open:e.value,"onUpdate:open":t[4]||(t[4]=o=>e.value=o),title:"Create New Tour",onOk:v,onCancel:P,"confirm-loading":p.value},{default:n(()=>[r(H,{ref_key:"createFormRef",ref:m,model:a,rules:g,layout:"vertical"},{default:n(()=>[r(k,{label:"Tour name",name:"tour_name"},{default:n(()=>[r(G,{value:a.tour_name,"onUpdate:value":t[1]||(t[1]=o=>a.tour_name=o),placeholder:"Enter tour name"},null,8,["value"])]),_:1}),r(k,{label:"Duration",name:"duration"},{default:n(()=>[r(I,{class:"!w-full",value:a.duration,"onUpdate:value":t[2]||(t[2]=o=>a.duration=o),min:1,max:20,placeholder:"Enter duration"},null,8,["value"])]),_:1}),r(k,{label:"Category",name:"category"},{default:n(()=>[r($,{value:a.category,"onUpdate:value":t[3]||(t[3]=o=>a.category=o),placeholder:"Select category"},{default:n(()=>[r(w,{value:"Budget"},{default:n(()=>[...t[6]||(t[6]=[f("Budget",-1)])]),_:1}),r(w,{value:"Luxury"},{default:n(()=>[...t[7]||(t[7]=[f("Luxury",-1)])]),_:1}),r(w,{value:"Comfort"},{default:n(()=>[...t[8]||(t[8]=[f("Comfort",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),r(b(Z),{fileTypes:["jpg","jpeg","png","pdf","doc","docx"],multiple:!1,onSuccess:i,class:"border-none p-0"},{default:n(({openFileSelector:o})=>[F("div",{class:"rounded overflow-hidden cursor-pointer",onClick:o},[a.image?(d(),y("img",{key:0,src:a.image,alt:"avatar",class:"w-full h-48 object-cover"},null,8,oe)):(d(),y("div",re,[...t[9]||(t[9]=[F("div",{class:"ant-upload-text"},"Upload Image",-1)])]))],8,te)]),_:1})]),_:1},8,["open","confirm-loading"])],64)}}};export{ie as default};
//# sourceMappingURL=TourList-fD7N7XDO.js.map
