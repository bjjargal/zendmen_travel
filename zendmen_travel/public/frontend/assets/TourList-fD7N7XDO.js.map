{"version":3,"file":"TourList-fD7N7XDO.js","sources":["../../../../frontend/src/pages/TourList.vue"],"sourcesContent":["<template>\n    <a-page-header class=\"!p-0 !mb-2\" title=\"Guide\">\n        <template #extra>\n            <a-button type=\"primary\" @click=\"open = true\">Create tour</a-button>\n        </template>\n    </a-page-header>\n    <a-empty v-if=\"!tours.data || tours.data.length === 0\" class=\"w-full\" description=\"No tours available\" />\n    <div v-else class=\"grid grid-cols-4 gap-4 p-4\">\n        <a-card v-for=\"tour in tours.data\" :key=\"tour.name\" hoverable\n            @click=\"router.push({ name: 'Tour', params: { name: tour.name } })\">\n            <template #cover>\n                <img class=\"h-80 w-full object-cover\" alt=\"image\" :src=\"tour.image || '/placeholder.jpg'\" />\n            </template>\n            <a-card-meta :title=\"tour.tour_name\">\n                <template #description>\n                    <a-tag color=\"blue\">{{ tour.category }}</a-tag>\n                    <a-tag color=\"orange\">{{ tour.duration }} days</a-tag>\n                </template>\n            </a-card-meta>\n        </a-card>\n    </div>\n\n    <a-modal v-model:open=\"open\" title=\"Create New Tour\" @ok=\"handleCreate\" @cancel=\"handleCancel\"\n        :confirm-loading=\"creating\">\n        <a-form ref=\"createFormRef\" :model=\"newTour\" :rules=\"formRules\" layout=\"vertical\">\n            <a-form-item label=\"Tour name\" name=\"tour_name\">\n                <a-input v-model:value=\"newTour.tour_name\" placeholder=\"Enter tour name\" />\n            </a-form-item>\n            <a-form-item label=\"Duration\" name=\"duration\">\n                <a-input-number class=\"!w-full\" v-model:value=\"newTour.duration\" :min=\"1\" :max=\"20\"\n                    placeholder=\"Enter duration\" />\n            </a-form-item>\n            <a-form-item label=\"Category\" name=\"category\">\n                <a-select v-model:value=\"newTour.category\" placeholder=\"Select category\">\n                    <a-select-option value=\"Budget\">Budget</a-select-option>\n                    <a-select-option value=\"Luxury\">Luxury</a-select-option>\n                    <a-select-option value=\"Comfort\">Comfort</a-select-option>\n                </a-select>\n            </a-form-item>\n        </a-form>\n        <FileUploader :fileTypes=\"['jpg', 'jpeg', 'png', 'pdf', 'doc', 'docx']\" :multiple=\"false\"\n            @success=\"handleFileUpload\" class=\"border-none p-0\">\n            <template #default=\"{ openFileSelector }\">\n                <div class=\"rounded overflow-hidden cursor-pointer\" @click=\"openFileSelector\">\n                    <img v-if=\"newTour.image\" :src=\"newTour.image\" alt=\"avatar\" class=\"w-full h-48 object-cover\" />\n                    <div v-else class=\"h-48 bg-gray-200 flex items-center justify-center\">\n                        <div class=\"ant-upload-text\">Upload Image</div>\n                    </div>\n                </div>\n            </template>\n        </FileUploader>\n    </a-modal>\n</template>\n<script setup>\nimport { createListResource, FileUploader } from 'frappe-ui';\nimport { ref, reactive, nextTick, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { message } from 'ant-design-vue';\n\nconst router = useRouter();\nconst open = ref(false);\nconst createFormRef = ref();\nconst creating = ref(false);\n\nconst tours = createListResource({\n    doctype: 'Tour',\n    fields: ['name', 'tour_name', 'duration',],\n    auto: false\n});\n\nconst newTour = reactive({\n    tour_name: '',\n    duration: 1,\n    category: '',\n    image: ''\n});\n\nconst formRules = {\n    tour_name: [{ required: true, message: 'Please enter tour name' }],\n    duration: [{ required: true, message: 'Please enter duration' }],\n    category: [{ required: true, message: 'Please select category' }]\n};\n\nconst handleFileUpload = (file) => {\n    newTour.image = file.file_url;\n};\n\nconst handleCreate = async () => {\n    try {\n        await createFormRef.value.validate();\n        creating.value = true;\n        await tours.insert.submit({ ...newTour });\n        message.success('Tour created successfully', 2);\n        newTour.tour_name = '';\n        newTour.duration = 1;\n        newTour.category = '';\n        newTour.image = '';\n        open.value = false;\n        await nextTick(() => createFormRef.value.resetFields());\n        await tours.reload();\n    } catch (error) {\n        if (error.errorFields) {\n            message.error('Please fix the errors below', 2);\n        } else {\n            message.error('Failed to create tour: ' + (error.message || error), 2);\n        }\n    } finally {\n        creating.value = false;\n    }\n};\n\nconst handleCancel = () => {\n    newTour.tour_name = '';\n    newTour.duration = 1;\n    newTour.category = '';\n    newTour.image = '';\n    open.value = false;\n    createFormRef.value.resetFields();\n};\n\nonMounted(async () => {\n    await tours.fetch();\n});\n</script>"],"names":["router","useRouter","open","ref","createFormRef","creating","tours","createListResource","newTour","reactive","formRules","handleFileUpload","file","handleCreate","__async","__spreadValues","message","nextTick","error","handleCancel","onMounted","_createVNode","_component_a_page_header","_component_a_button","_cache","_unref","_createBlock","_component_a_empty","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","tour","_component_a_card","_createElementVNode","_component_a_card_meta","_component_a_tag","_createTextVNode","_toDisplayString","_component_a_modal","$event","_component_a_form","_component_a_form_item","_component_a_input","_component_a_input_number","_component_a_select","_component_a_select_option","FileUploader","_withCtx","openFileSelector","_hoisted_5"],"mappings":"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"}