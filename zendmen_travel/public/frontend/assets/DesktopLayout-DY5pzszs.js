var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var B=(t,e,o)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,D=(t,e)=>{for(var o in e||(e={}))te.call(e,o)&&B(t,o,e[o]);if(j)for(var o of j(e))se.call(e,o)&&B(t,o,e[o]);return t},T=(t,e)=>Z(t,ee(e));import{_ as oe}from"./zlogo-D2KzVlco.js";import{r as S,c as m,o as u,a as w,b as s,d as $,u as l,e as c,f as C,n as A,_ as b,t as V,g as q,h as R,w as i,T as U,F as x,i as ae,j as ne,k as le,l as re,m as z,p as v,q as ie,s as N,v as G,x as ue,y as O,z as E,A as ce,B as p,C as de,D as P}from"./index-DDp1eRUk.js";const fe={key:0,class:"flex items-center justify-between"},pe={key:0},me={__name:"Section",props:{label:{type:String,default:""},hideLabel:{type:Boolean,default:!1},isOpened:{type:Boolean,default:!0}},setup(t){const e=t;function o(){r.value=!r.value}function n(){r.value=!0}function d(){r.value=!1}let r=S(e.isOpened),f=S(e.hideLabel);return(y,_)=>(u(),m(x,null,[w(y.$slots,"header",q(R({opened:l(r),hide:l(f),open:n,close:d,toggle:o})),()=>[l(f)?$("",!0):(u(),m("div",fe,[c("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 pl-2 pr-3 text-base font-semibold leading-5",onClick:_[0]||(_[0]=a=>o())},[s(l(b),{name:"chevron-right",class:A(["h-4 text-gray-900 transition-all duration-300 ease-in-out",{"rotate-90":l(r)}])},null,8,["class"]),C(" "+V(t.label||"Untitled"),1)]),w(y.$slots,"actions")]))]),s(U,{"enter-active-class":"duration-300 ease-in","leave-active-class":"duration-300 ease-[cubic-bezier(0, 1, 0.5, 1)]","enter-to-class":"max-h-[200px] overflow-hidden","leave-from-class":"max-h-[200px] overflow-hidden","enter-from-class":"max-h-0 overflow-hidden","leave-to-class":"max-h-0 overflow-hidden"},{default:i(()=>[l(r)?(u(),m("div",pe,[w(y.$slots,"default",q(R({opened:l(r),open:n,close:d,toggle:o})))])):$("",!0)]),_:3})],64))}},_e={class:"flex items-center truncate"},ve={class:"grid flex-shrink-0 place-items-center"},ye={class:"flex-1 flex-shrink-0 truncate text-sm duration-300 ease-in-out ml-2 w-auto opacity-100"},be={key:0,class:"flex flex-col pl-6 overflow-hidden"},H={__name:"SidebarLink",props:{icon:{type:[Object,String]},label:{type:String,default:""},to:{type:[Object,String],default:""},child:{type:Array,default:()=>[]},ischild:{type:Boolean,default:!1}},setup(t){const e=t,o=`sidebar-open-${e.label}`,n=ae(o,!1),d=ne(),r=le(),f=re();function y(){e.to&&(typeof e.to=="object"?r.push(e.to):r.push({name:e.to}))}const _=z(()=>{if(!e.to)return!1;if(typeof e.to=="string")return f.name===e.to;if(typeof e.to=="object"){if(f.name!==e.to.name)return!1;if(e.to.params){for(const a in e.to.params)if(f.params[a]!==e.to.params[a])return!1}if(e.to.query){for(const a in e.to.query)if(f.query[a]!==e.to.query[a])return!1}return!0}return!1});return(a,k)=>(u(),m(x,null,[c("div",ue(l(d),{class:["flex h-7 my-0.5 cursor-pointer items-center rounded hover:bg-gray-500 text-white duration-400 ease-in-out focus:outline-none focus:transition-none focus-visible:rounded focus-visible:ring-2 focus-visible:ring-gray-400",_.value?"bg-gray-700 shadow-sm":""]}),[c("div",{class:A(["flex w-full items-center justify-between duration-300 ease-in-out px-2 py-1",t.ischild?"border-b border-[#1627e7]":""]),onClick:y},[c("div",_e,[s(l(N),{text:t.label,placement:"right"},{default:i(()=>[w(a.$slots,"icon",{},()=>[c("span",ve,[typeof t.icon=="string"?(u(),v(l(b),{key:0,name:t.icon,class:"size-4"},null,8,["name"])):(u(),v(ie(t.icon),{key:1,class:"size-4 text-gray-700"}))])])]),_:3},8,["text"]),s(l(N),{text:t.label,placement:"right",hoverDelay:1.5},{default:i(()=>[c("span",ye,V(t.label),1)]),_:1},8,["text"])]),t.child.length>0?(u(),m("span",{key:0,onClick:k[0]||(k[0]=G(h=>n.value=!l(n),["stop"])),class:"ml-1 transition-transform duration-300"},[s(l(b),{name:"chevron-down",class:A(["h-4",{"rotate-180":l(n)}])},null,8,["class"])])):$("",!0)],2)],16),s(U,{name:"sidebar-slide","enter-active-class":"transition-all duration-100 ease-in-out","leave-active-class":"transition-all duration-100 ease-in-out"},{default:i(()=>[l(n)?(u(),m("nav",be,[(u(!0),m(x,null,O(t.child,h=>(u(),v(H,{key:h.label,icon:null,label:h.label,to:h.to,ischild:!0},null,8,["label","to"]))),128))])):$("",!0)]),_:1})],64))}},he=[{label:"Хянах самбар",icon:"home",to:"Home"},{label:"Tour",icon:"map",to:"TourList"},{label:"Guide",icon:"user",to:"Guide"},{label:"Activity",icon:"activity",to:"ActivityList"},{label:"Destination",icon:"map",to:"DestinationList"}];function F(t,e){return t.roles?t.roles.some(o=>e.value.includes(o)):!0}function xe(){const t=E(),{roles:e}=ce(t);return z(()=>[{name:"All Views",hideLabel:!0,opened:!0,views:he.filter(n=>F(n,e)).map(n=>T(D({},n),{child:n.child?n.child.filter(d=>F(d,e)):[]}))}])}const ge={class:"flex-1 ! !pr-5 [scrollbar-width:none] [-ms-overflow-style:none] !hide-scrollbar"},we={class:"flex flex-col"},$e={__name:"AppSidebar",setup(t){const e=xe();return(o,n)=>{const d=p("a-layout-sider");return u(),v(d,{class:"relative flex-col !overflow-y-auto !bg-[#111727] !flex",width:"300"},{default:i(()=>[n[0]||(n[0]=c("div",{class:"p-4 text-white text-3xl font-bold text-center"},[c("img",{src:oe,alt:""})],-1)),c("div",ge,[(u(!0),m(x,null,O(l(e),r=>(u(),m("div",{key:r.label},[s(me,{label:r.name,hideLabel:r.hideLabel,isOpened:r.opened},{default:i(()=>[c("nav",we,[(u(!0),m(x,null,O(r.views,f=>(u(),v(H,{label:f.label,to:f.to,icon:f.icon,child:f.child?f.child:[],class:"mx-2 my-0.5"},null,8,["label","to","icon","child"]))),256))])]),_:2},1032,["label","hideLabel","isOpened"])]))),128))])]),_:1})}}},ke={class:"flex gap-2"},Ce={class:"flex gap-2"},Se={class:"flex gap-2"},ze={__name:"UserDropdown",setup(t){const e=E(),o=z(()=>{var _;return((_=e.employee)==null?void 0:_.image)||""}),n=z(()=>e.employee&&e.employee.first_name?`${e.employee.last_name||""} ${e.employee.first_name||""}`.trim():e.user||"Guest"),d=S(!1),r=S(""),f=()=>de({url:"erp.api.new_password",params:{new_password:r.value},auto:!0,onSuccess(){P.success({content:"Нууц үг амжилттай солигдлоо",duration:1}),d.value=!1},onError(){P.error({content:"Нууц үг  солиход алдаа гарлаа",duration:1})}});function y(){window.open("/app","_blank")}return(_,a)=>{const k=p("a-avatar"),h=p("a-button"),L=p("a-menu-item"),M=p("a-menu-divider"),K=p("a-menu"),I=p("a-dropdown"),J=p("a-input-password"),Q=p("a-form-item"),W=p("a-form"),X=p("a-modal");return u(),m(x,null,[s(I,{trigger:["hover"],placement:"bottomRight",arrow:""},{overlay:i(()=>[s(K,null,{default:i(()=>[l(e).roles.includes("System Manager")?(u(),v(L,{key:0,onClick:y},{default:i(()=>[c("span",ke,[s(l(b),{name:"server",class:"size-5"}),a[5]||(a[5]=C(" Frappe ",-1))])]),_:1})):$("",!0),s(L,{onClick:a[1]||(a[1]=g=>d.value=!0)},{default:i(()=>[c("span",Ce,[s(l(b),{name:"lock",class:"size-5"}),a[6]||(a[6]=C(" Нууц үг солих ",-1))])]),_:1}),s(M),s(L,{class:"!text-red-500 !flex",onClick:a[2]||(a[2]=g=>l(e).logout.submit())},{default:i(()=>[c("span",Se,[s(l(b),{name:"log-out",class:"size-5"}),a[7]||(a[7]=C(" Гарах ",-1))])]),_:1})]),_:1})]),default:i(()=>[s(h,{size:"large",class:"!flex items-center gap-2 !py-6",onClick:a[0]||(a[0]=G(()=>{},["prevent"]))},{default:i(()=>[c("div",null,[s(k,{src:o.value,class:"size-10"},null,8,["src"])]),c("div",null,V(n.value),1),c("div",null,[s(l(b),{name:"chevron-down",class:"size-7"})])]),_:1})]),_:1}),s(X,{cancelText:"Хаах",okText:"Хадгалах",open:d.value,"onUpdate:open":a[4]||(a[4]=g=>d.value=g),title:"Бүтэц",onOk:f},{default:i(()=>[s(W,{name:"newPassword",layout:"vertical"},{default:i(()=>[s(Q,{label:"Шинэ нууц үг",rules:[{required:!0,message:"Нууц үг оруулна уу"}]},{default:i(()=>[s(J,{value:r.value,"onUpdate:value":a[3]||(a[3]=g=>r.value=g)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}},Le={class:"flex gap-4 items-center"},Ae={__name:"AppHeader",setup(t){return(e,o)=>{const n=p("a-layout-header");return u(),v(n,{class:"!bg-white !border-b overflow-hidden !px-8 !h-20 flex justify-between items-center"},{default:i(()=>[o[0]||(o[0]=c("div",null,null,-1)),c("div",Le,[c("div",null,[s(ze)])])]),_:1})}}},Be={__name:"DesktopLayout",setup(t){return(e,o)=>{const n=p("a-layout-content"),d=p("a-layout");return u(),v(d,{class:"h-screen flex"},{default:i(()=>[s($e,{class:"h-screen sticky top-0"}),s(d,{class:"flex-1 flex flex-col"},{default:i(()=>[s(Ae),s(n,{class:"pt-4 px-8 flex-1 overflow-y-auto"},{default:i(()=>[w(e.$slots,"default")]),_:3})]),_:3})]),_:3})}}};export{Be as default};
//# sourceMappingURL=DesktopLayout-DY5pzszs.js.map
